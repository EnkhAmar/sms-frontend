(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[19],{520:function(e,t,a){"use strict";a(0);var c=a(484),n=a(191),s=a(279),o=a(1),l=function(e){return Object(o.jsx)(c.a,{overlay:e.menu,placement:e.placement,trigger:["click"],children:Object(o.jsx)("div",{className:"ellipsis-dropdown",children:Object(o.jsx)(s.a,{})})})};l.defaultProps={trigger:"click",placement:"bottomRight",menu:Object(o.jsx)(n.a,{})},t.a=l},524:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var c=a(66),n=a(0),s=a(22),o=a(28),l=a(1),r=function(e){var t=e.children,a=e.background,s=e.className,r=e.overlap,i=e.navType,d=Object(n.useState)(0),j=Object(c.a)(d,2),b=j[0],u=j[1],h=Object(n.useRef)(null);Object(n.useEffect)((function(){if(i===o.d){var e=window.innerWidth,t=h.current.offsetWidth;u((e-t)/2)}}),[i]);return Object(l.jsx)("div",{ref:h,className:"page-header-alt ".concat(s||""," ").concat(r&&"overlap"),style:function(){var e={backgroundImage:a?"url(".concat(a,")"):"none"};return i===o.d&&(e.marginRight=-b,e.marginLeft=-b,e.paddingLeft=0,e.paddingRight=0),e}(),children:i===o.d?Object(l.jsx)("div",{className:"container",children:t}):Object(l.jsx)(l.Fragment,{children:t})})};t.b=Object(s.b)((function(e){return{navType:e.theme.navType}}),{})(r)},566:function(e,t,a){},596:function(e,t,a){},654:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(45),s=a(22),o=(a(120),a(66)),l=a(524),r=a(658),i=a(165),d=a(305),j=a(483),b=a(114),u=a(544),h=a(121),m=a(523),O=a(519),p=a(542),x=a(644),f=a(508),v=a(645),g=a(642),y=a(89),w=a(192),C=a(118),N=a(667),S=a(1),k=function(e){var t=e.name,a=e.address,c=e.color;return Object(S.jsxs)("div",{children:[Object(S.jsx)("h4",{className:"mb-0",style:{display:"inline-block",marginRight:10},children:t}),Object(S.jsx)(C.a,{title:c}),a?Object(S.jsxs)("div",{children:[Object(S.jsx)(N.a,{})," ",a]}):null]})},I=function(e){var t=e.description;return Object(S.jsx)(y.a,{alignItems:"left",children:Object(S.jsx)("div",{className:"mr-3",children:Object(S.jsx)(C.a,{title:"Description",children:Object(S.jsx)("span",{children:t})})})})},B=function(e){var t=e.website;return Object(S.jsx)(y.a,{alignItems:"left",children:Object(S.jsx)("div",{className:"mr-3",children:Object(S.jsx)(C.a,{title:"Website",children:Object(S.jsx)("a",{style:{textDecoration:"underline"},href:t,children:t})})})})},D=a(10),E=a(490),U=a(491),L=a(634),A=a(646),F=(a(566),i.a.Option),T=function(e){var t=e.handleCancel,a=e.handleSubmit,c=e.props,n=e.schools,s=e.type,o=e.fields,l=e.handleUpdate,r=e.submit;return Object(S.jsxs)(E.a,{labelCol:{span:24},wrapperCol:{span:24},onFinish:"add"===s?a:l,name:"School Form",fields:o,children:[Object(S.jsx)(E.a.Item,{label:"Branch Name",name:"name",rules:[{required:!0,message:"Please input branch name!"}],children:Object(S.jsx)(U.a,{placeholder:"Enter Branch Name"})}),n&&n.length>0?Object(S.jsx)(E.a.Item,{label:"School",name:"school",rules:[{required:!0,message:"Please select a school!"}],children:Object(S.jsx)(i.a,{showSearch:!0,style:{width:"100%"},placeholder:"Select a school",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:n.map((function(e){return Object(S.jsx)(F,{value:e.id,children:e.name},e.id)}))})}):null,Object(S.jsx)(E.a.Item,{label:"Description",name:"description",rules:[{max:128,message:"Description cannot be more than 128 characters!"}],children:Object(S.jsx)(U.a,{placeholder:"Enter Branch Description"})}),Object(S.jsx)(E.a.Item,{label:"Address",name:"address",children:Object(S.jsx)(U.a,{placeholder:"Enter Branch Address"})}),Object(S.jsx)(E.a.Item,{label:"Website",name:"website",children:Object(S.jsx)(U.a,{placeholder:"Enter Branch Website"})}),Object(S.jsx)(E.a.Item,{label:"Image",name:"image",children:Object(S.jsx)(L.a,Object(D.a)(Object(D.a)({},c),{},{multiple:!1,accept:"image/*",children:Object(S.jsxs)(b.a,{children:[Object(S.jsx)(A.a,{})," Select Image"]})}))}),Object(S.jsx)(E.a.Item,{label:"Color",name:"color",children:Object(S.jsxs)(j.a.Group,{name:"color",className:"radio-group",buttonStyle:"solid",children:[Object(S.jsx)(j.a.Button,{className:"radio-button",value:"#ef476f",style:{backgroundColor:"#ef476f"}}),Object(S.jsx)(j.a.Button,{className:"radio-button",value:"#ffd166",style:{backgroundColor:"#ffd166"}}),Object(S.jsx)(j.a.Button,{className:"radio-button",value:"#06d6a0",style:{backgroundColor:"#06d6a0"}}),Object(S.jsx)(j.a.Button,{className:"radio-button",value:"#457b9d",style:{backgroundColor:"#457b9d"}}),Object(S.jsx)(j.a.Button,{className:"radio-button",value:"#6d597a",style:{backgroundColor:"#6d597a"}}),Object(S.jsx)(j.a.Button,{className:"radio-button",value:"#073b4c",style:{backgroundColor:"#073b4c"}}),Object(S.jsx)(j.a.Button,{className:"radio-button",value:"#a44a3f",style:{backgroundColor:"#a44a3f"}})]})}),Object(S.jsx)(E.a.Item,{children:Object(S.jsxs)(O.a,{style:{textAlign:"right"},children:[Object(S.jsx)(b.a,{onClick:t,children:"Cancel"}),Object(S.jsx)(b.a,{type:"primary",loading:r,htmlType:"submit",style:{marginLeft:8},children:"add"===s?"Submit":"Save"})]})})]})},M=(i.a.Option,function(e){var t=e.visible,a=e.handleCancel,c=e.handleSubmit,n=e.props,s=e.logoProps,o=e.schools,l=e.type,i=e.fields,d=e.handleUpdate,j=e.submit;return Object(S.jsx)(r.a,{title:"Add New Branch",visible:t,onCancel:a,footer:null,bodyStyle:{padding:"5px 25px"},children:Object(S.jsx)(T,{handleCancel:a,handleSubmit:c,handleUpdate:d,props:n,logoProps:s,schools:o,type:l,fields:i,submit:j})})}),W=a(529),R=a(493),P=a(668),z=a(669),_=a(76),G=a.n(_),q=W.a.Meta,J=function(e){var t=e.data,a=e.removeId,c=(e.handleUpdate,e.schools,e.showModal);return Object(S.jsxs)(W.a,{cover:Object(S.jsx)("img",{src:t.image,style:{height:200,objectFit:"cover"}}),actions:[Object(S.jsx)("div",{className:"edit-button",onClick:function(){return c(t)},children:Object(S.jsx)(P.a,{},"edit")}),Object(S.jsx)("div",{className:"delete-button",onClick:function(){return a(t.name,t.id)},children:Object(S.jsx)(z.a,{},"delete")})],children:[Object(S.jsx)(q,{avatar:Object(S.jsx)(R.a,{style:{backgroundColor:t.color,border:t.school_image?"3px solid ".concat(t.color):null},src:t.school_image,children:t.school_image?"":Object(S.jsx)("span",{className:"font-weight-semibold font-size-sm",children:Object(w.a)(t.name)})}),description:Object(S.jsx)("div",{children:Object(S.jsx)(y.a,{alignItems:"center",justifyContent:"between",children:Object(S.jsx)(k,{name:t.name,address:t.address,color:t.color})})})}),Object(S.jsxs)("div",{className:"mt-2",children:[Object(S.jsx)(B,{website:t.website}),Object(S.jsx)(I,{description:t.description})]})]})},V=a(520),Y=a(191),H=a(499),K=a(537),Q=function(e){var t=e.data,a=e.removeId,c=e.showModal;return Object(S.jsx)(V.a,{menu:Object(S.jsxs)(Y.a,{children:[Object(S.jsxs)(Y.a.Item,{onClick:function(){return c(t)},children:[Object(S.jsx)(H.a,{}),Object(S.jsx)("span",{children:"Edit"})]},"0"),Object(S.jsxs)(Y.a.Item,{onClick:function(){return a(t.name,t.id)},children:[Object(S.jsx)(K.a,{}),Object(S.jsx)("span",{children:"Delete"})]},"1")]})})},X=function(e){var t=e.data,a=e.removeId,c=(e.handleUpdate,e.schools,e.showModal);return Object(S.jsx)(W.a,{className:"rounded p-3 mb-3 border",bodyStyle:{padding:0},children:Object(S.jsxs)(m.a,{align:"middle",children:[Object(S.jsx)(O.a,{xs:24,sm:24,md:2,children:Object(S.jsx)(R.a,{style:{backgroundColor:t.color,border:t.image?"3px solid ".concat(t.color):null},src:t.school_image,children:t.school_image?"":Object(S.jsx)("span",{className:"font-weight-semibold font-size-sm",children:Object(w.a)(t.name)})})}),Object(S.jsx)(O.a,{xs:24,sm:24,md:7,children:Object(S.jsx)(k,{name:t.name,address:t.address,color:t.color})}),Object(S.jsx)(O.a,{xs:24,sm:24,md:13,children:Object(S.jsxs)("div",{className:"text-left",children:[Object(S.jsx)(B,{website:t.website}),Object(S.jsx)(I,{description:t.description})]})}),Object(S.jsx)(O.a,{xs:24,sm:24,md:2,children:Object(S.jsx)("div",{className:"text-right",children:Object(S.jsx)(Q,{data:t,removeId:a,showModal:c})})})]})})},Z=a(75),$=a(77),ee=r.a.confirm,te=(i.a.Option,"LIST"),ae="GRID",ce=function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(ae),i=Object(o.a)(r,2),w=i[0],C=i[1],N=Object(c.useState)([]),k=Object(o.a)(N,2),I=k[0],B=k[1],D=Object(c.useState)(0),E=Object(o.a)(D,2),U=E[0],L=E[1],A=Object(c.useState)(1),F=Object(o.a)(A,2),T=F[0],W=F[1],R=Object(c.useState)(!1),P=Object(o.a)(R,2),z=P[0],_=P[1],q=Object(c.useState)(!1),V=Object(o.a)(q,2),Y=V[0],H=V[1],K=Object(c.useState)([]),Q=Object(o.a)(K,2),ce=Q[0],ne=Q[1],se=Object(c.useState)([]),oe=Object(o.a)(se,2),le=oe[0],re=oe[1],ie=Object(c.useState)([{name:["name"],value:""},{name:["description"],value:""},{name:["address"],value:""},{name:["website"],value:""},{name:["color"],value:"#457b9d"}]),de=Object(o.a)(ie,2),je=de[0],be=de[1],ue=Object(c.useState)("add"),he=Object(o.a)(ue,2),me=he[0],Oe=he[1],pe=Object(c.useState)(null),xe=Object(o.a)(pe,2),fe=xe[0],ve=xe[1],ge=Object(s.d)((function(e){return e.userLogin.user.school})),ye=Object(s.d)((function(e){return e.userLogin.user.role_id})),we=Object(s.d)((function(e){return e.userLogin.token})),Ce=Object(s.d)((function(e){return e.filters.school})),Ne={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(we)}};Object(c.useEffect)((function(){De(1),ye===Z.k&&Se()}),[Ce]);var Se=function(){G.a.post("".concat($.d,"/api/utility/detail/"),{projection:["school"]},Ne).then((function(e){re(e.data.data.school)})).catch((function(e){console.log(e.response.data)}))},ke=function(e){e?(be([{name:["name"],value:e.name},{name:["description"],value:e.description},{name:["school"],value:e.school},{name:["address"],value:e.address},{name:["website"],value:e.website},{name:["color"],value:e.color}]),Oe("edit"),ve(e.id)):(be([{name:["name"],value:""},{name:["description"],value:""},{name:["school"],value:null},{name:["address"],value:""},{name:["website"],value:""},{name:["color"],value:"#457b9d"}]),Oe("add")),ne([]),_(!0)},Ie={onRemove:function(e){ne([])},beforeUpload:function(e){return ne([e]),!1},fileList:ce},Be=function(e,t){ee({title:"Are you sure delete this branch?",content:Object(S.jsx)("div",{children:e}),okText:Object(S.jsx)("div",{children:"Yes"}),okType:"danger",cancelText:"No",onOk:function(){var a="updatable";d.b.loading("Deleting branch...",a,0),G.a.delete("".concat($.d,"/api/school/branch/").concat(t,"/"),Ne).then((function(t){U-1-(T-1)*Z.g<=0&&U>1?De(T-1):De(T),d.b.success({content:"".concat(e," deleted successfully!"),key:a,duration:2})})).catch((function(e){Object.values(e.response.data).forEach((function(e){return d.b.error({content:e,key:a,duration:2})}))}))}})},De=function(e){n(!0);var t="".concat($.d,"/api/school/branch/?page=").concat(e);null!=Ce&&(t="".concat($.d,"/api/school/action/").concat(Ce,"/branch/?page=").concat(e)),G.a.get(t,Ne).then((function(t){B(t.data.results),W(e),L(t.data.count),n(!1)})).catch((function(e){console.log(e.response.data)}))},Ee=function(e){H(!0);var t=new FormData;null===ge?t.append("school",e.school):t.append("school",ge),t.append("name",e.name),t.append("address",e.address),t.append("description",e.description),t.append("color",e.color),t.append("website",e.website),t.append("image",ce[0]?ce[0]:""),G.a.put("".concat($.d,"/api/school/branch/").concat(fe,"/"),t,Ne).then((function(t){De(T),H(!1),_(!1),d.b.success({content:"".concat(e.name," updated successfully!"),duration:2})})).catch((function(e){console.log(e.response.data),H(!1),Object.values(e.response.data).forEach((function(e){return d.b.error({content:e,duration:2})}))}))};return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(l.b,{className:"border-bottom",children:Object(S.jsx)("div",{className:"container-fluid",children:Object(S.jsxs)(y.a,{justifyContent:"between",alignItems:"center",children:[Object(S.jsx)("div",{children:Object(S.jsxs)("h2",{children:[Object(S.jsx)(x.a,{})," Branches"]})}),Object(S.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(S.jsx)("div",{style:{flex:1,textAlign:"right",marginBottom:10,minWidth:91},children:Object(S.jsxs)(j.a.Group,{defaultValue:ae,onChange:function(e){return function(e){C(e.target.value)}(e)},children:[Object(S.jsx)(j.a.Button,{value:ae,children:Object(S.jsx)(f.a,{})}),Object(S.jsx)(j.a.Button,{value:te,children:Object(S.jsx)(v.a,{})})]})}),Object(S.jsx)("div",{style:{textAlign:"right",flex:1},children:Object(S.jsxs)(b.a,{type:"primary",className:"ml-2",onClick:function(){return ke(null)},children:[Object(S.jsx)(g.a,{}),Object(S.jsx)("span",{children:"New Branch"})]})})]})]})})}),a?Object(S.jsx)(u.a,{active:!0}):Object(S.jsx)(S.Fragment,{children:0===U?Object(S.jsx)("div",{style:{marginTop:20},children:Object(S.jsx)(h.a,{})}):Object(S.jsxs)("div",{className:"my-4 ".concat(w===te?"container":"container-fluid"),children:[w===te?I.map((function(e){return Object(S.jsx)(X,{data:e,removeId:Be,handleUpdate:Ee,schools:le,showModal:ke},e.id)})):Object(S.jsx)(m.a,{gutter:46,children:I.map((function(e){return Object(S.jsx)(O.a,{xs:24,sm:12,lg:12,xl:8,xxl:6,children:Object(S.jsx)(J,{data:e,removeId:Be,handleUpdate:Ee,schools:le,showModal:ke})},e.id)}))}),U>Z.g?Object(S.jsx)(y.a,{justifyContent:"end",children:Object(S.jsx)(p.a,{current:T,onChange:De,total:U,pageSize:Z.g})}):null]})}),Object(S.jsx)(M,{visible:z,handleCancel:function(){_(!1)},handleSubmit:function(e){H(!0);var t=new FormData;ye===Z.k?t.append("school",e.school):t.append("school",ge),t.append("name",e.name),t.append("address",e.address),t.append("description",e.description),t.append("color",e.color),t.append("website",e.website),t.append("image",ce[0]?ce[0]:""),G.a.post("".concat($.d,"/api/school/branch/"),t,Ne).then((function(t){De(T),d.b.success({content:"".concat(e.name," added successfully!"),duration:2}),H(!1),_(!1)})).catch((function(e){console.log(e.response.data),H(!1),Object.values(e.response.data).forEach((function(e){return d.b.error({content:e,duration:2})}))}))},handleUpdate:Ee,props:Ie,schools:le,type:me,fields:je,submit:Y})]})},ne=a(504),se=a(227),oe=a(136),le=a(44),re=(se.a,function(e){var t=e.name,a=e.address,c=(e.color,e.dataId),n=Object(s.c)();return Object(S.jsxs)("div",{children:[Object(S.jsx)(le.b,{to:"branch",onClick:function(){n(Object(oe.b)(c))},children:Object(S.jsx)("h4",{className:"mb-0",style:{display:"inline-block",marginRight:10},children:t})}),a?Object(S.jsxs)("div",{children:[Object(S.jsx)(N.a,{})," ",a]}):null]})}),ie=function(e){var t=e.description;return Object(S.jsx)(y.a,{alignItems:"left",children:Object(S.jsx)("div",{className:"mr-3",children:Object(S.jsx)(C.a,{title:"Description",children:Object(S.jsx)("span",{children:t})})})})},de=function(e){var t=e.website;return Object(S.jsx)(y.a,{alignItems:"left",children:Object(S.jsx)("div",{className:"mr-3",children:Object(S.jsx)(C.a,{title:"Website",children:Object(S.jsx)("a",{style:{textDecoration:"underline"},href:t,children:t})})})})},je=(a(596),i.a.Option,function(e){var t=e.handleCancel,a=e.handleSubmit,c=e.props,n=e.logoProps,s=e.handleUpdate,o=e.fields,l=e.type,r=e.submit;return Object(S.jsxs)(E.a,{labelCol:{span:24},wrapperCol:{span:24},onFinish:"add"===l?a:s,name:"School Form",fields:o,children:[Object(S.jsx)(E.a.Item,{label:"School Name",name:"name",rules:[{required:!0,message:"Please input school name!"}],children:Object(S.jsx)(U.a,{placeholder:"Enter School Name"})}),Object(S.jsx)(E.a.Item,{label:"Description",name:"description",rules:[{max:128,message:"Description cannot be more than 128 characters!"}],children:Object(S.jsx)(U.a,{placeholder:"Enter School Description"})}),Object(S.jsx)(E.a.Item,{label:"Address",name:"address",children:Object(S.jsx)(U.a,{placeholder:"Enter School Address"})}),Object(S.jsx)(E.a.Item,{label:"Website",name:"website",children:Object(S.jsx)(U.a,{placeholder:"Enter School Website"})}),Object(S.jsxs)("div",{className:"flex",children:[Object(S.jsx)("div",{className:"flex-1",children:Object(S.jsx)(E.a.Item,{label:"Image",name:"image",children:Object(S.jsx)(L.a,Object(D.a)(Object(D.a)({},c),{},{multiple:!1,accept:"image/*",children:Object(S.jsxs)(b.a,{children:[Object(S.jsx)(A.a,{})," Select Image"]})}))})}),Object(S.jsx)("div",{className:"flex-1",children:Object(S.jsx)(E.a.Item,{label:"Logo",name:"logo",children:Object(S.jsx)(L.a,Object(D.a)(Object(D.a)({},n),{},{multiple:!1,accept:"image/*",children:Object(S.jsxs)(b.a,{children:[Object(S.jsx)(A.a,{})," Select Logo"]})}))})})]}),Object(S.jsx)(E.a.Item,{label:"Color",name:"color",children:Object(S.jsxs)(j.a.Group,{name:"color",className:"radio-group",buttonStyle:"solid",children:[Object(S.jsx)(j.a.Button,{className:"radio-button",value:"#ef476f",style:{backgroundColor:"#ef476f"}}),Object(S.jsx)(j.a.Button,{className:"radio-button",value:"#ffd166",style:{backgroundColor:"#ffd166"}}),Object(S.jsx)(j.a.Button,{className:"radio-button",value:"#06d6a0",style:{backgroundColor:"#06d6a0"}}),Object(S.jsx)(j.a.Button,{className:"radio-button",value:"#457b9d",style:{backgroundColor:"#457b9d"}}),Object(S.jsx)(j.a.Button,{className:"radio-button",value:"#6d597a",style:{backgroundColor:"#6d597a"}}),Object(S.jsx)(j.a.Button,{className:"radio-button",value:"#073b4c",style:{backgroundColor:"#073b4c"}}),Object(S.jsx)(j.a.Button,{className:"radio-button",value:"#a44a3f",style:{backgroundColor:"#a44a3f"}})]})}),Object(S.jsx)(E.a.Item,{children:Object(S.jsxs)(O.a,{style:{textAlign:"right"},children:[Object(S.jsx)(b.a,{onClick:t,children:"Cancel"}),Object(S.jsx)(b.a,{type:"primary",loading:r,htmlType:"submit",style:{marginLeft:8},children:"add"===l?"Submit":"Save"})]})})]})}),be=(i.a.Option,function(e){var t=e.visible,a=e.handleCancel,c=e.handleSubmit,n=e.props,s=e.logoProps,o=e.type,l=e.fields,i=e.handleUpdate,d=e.submit;return Object(S.jsx)(r.a,{title:"Add New School",visible:t,onCancel:a,footer:null,bodyStyle:{padding:"5px 25px"},children:Object(S.jsx)(je,{fields:l,handleCancel:a,handleUpdate:i,handleSubmit:c,props:n,logoProps:s,type:o,submit:d})})}),ue=W.a.Meta,he=function(e){var t=e.data,a=e.removeId,c=(e.handleUpdate,e.showModal);return Object(S.jsxs)(W.a,{cover:Object(S.jsx)("img",{src:t.image,style:{height:200,objectFit:"cover"}}),actions:[Object(S.jsx)("div",{className:"edit-button",onClick:function(){return c(t)},children:Object(S.jsx)(P.a,{},"edit")}),Object(S.jsx)("div",{className:"delete-button",onClick:function(){return a(t.name,t.id)},children:Object(S.jsx)(z.a,{},"delete")})],children:[Object(S.jsx)(ue,{avatar:Object(S.jsx)(R.a,{style:{backgroundColor:t.color,border:t.logo?"3px solid ".concat(t.color):null},src:t.logo,children:t.logo?"":Object(S.jsx)("span",{className:"font-weight-semibold font-size-sm",children:Object(w.a)(t.name)})}),description:Object(S.jsx)("div",{children:Object(S.jsx)(y.a,{alignItems:"center",justifyContent:"between",children:Object(S.jsx)(re,{name:t.name,address:t.address,color:t.color,dataId:t.id})})})}),Object(S.jsxs)("div",{className:"mt-2",children:[Object(S.jsx)(de,{website:t.website}),Object(S.jsx)(ie,{description:t.description})]})]})},me=function(e){var t=e.data,a=e.removeId,c=e.showModal;return Object(S.jsx)(V.a,{menu:Object(S.jsxs)(Y.a,{children:[Object(S.jsxs)(Y.a.Item,{onClick:function(){return c(t)},children:[Object(S.jsx)(H.a,{}),Object(S.jsx)("span",{children:"Edit"})]},"0"),Object(S.jsxs)(Y.a.Item,{onClick:function(){return a(t.name,t.id)},children:[Object(S.jsx)(K.a,{}),Object(S.jsx)("span",{children:"Delete"})]},"1")]})})},Oe=function(e){var t=e.data,a=e.removeId,c=(e.handleUpdate,e.showModal);return Object(S.jsx)(W.a,{className:"rounded p-3 mb-3 border",bodyStyle:{padding:0},children:Object(S.jsxs)(m.a,{align:"middle",children:[Object(S.jsx)(O.a,{xs:24,sm:24,md:2,children:Object(S.jsx)(R.a,{style:{backgroundColor:t.color,border:t.logo?"3px solid ".concat(t.color):null},src:t.logo,children:t.logo?"":Object(S.jsx)("span",{className:"font-weight-semibold font-size-sm",children:Object(w.a)(t.name)})})}),Object(S.jsx)(O.a,{xs:24,sm:24,md:7,children:Object(S.jsx)(re,{name:t.name,address:t.address,color:t.color,dataId:t.id})}),Object(S.jsx)(O.a,{xs:24,sm:24,md:13,children:Object(S.jsxs)("div",{className:"text-left",children:[Object(S.jsx)(de,{website:t.website}),Object(S.jsx)(ie,{description:t.description})]})}),Object(S.jsx)(O.a,{xs:24,sm:24,md:2,children:Object(S.jsx)("div",{className:"text-right",children:Object(S.jsx)(me,{data:t,removeId:a,showModal:c})})})]})})},pe=r.a.confirm,xe="LIST",fe="GRID",ve=function(e){var t=Object(c.useState)(!0),a=Object(o.a)(t,2),n=a[0],r=a[1],i=Object(c.useState)(fe),x=Object(o.a)(i,2),w=x[0],C=x[1],N=Object(c.useState)([]),k=Object(o.a)(N,2),I=k[0],B=k[1],D=Object(c.useState)(0),E=Object(o.a)(D,2),U=E[0],L=E[1],A=Object(c.useState)(1),F=Object(o.a)(A,2),T=F[0],M=F[1],W=Object(c.useState)(!1),R=Object(o.a)(W,2),P=R[0],z=R[1],_=Object(c.useState)(!1),q=Object(o.a)(_,2),J=q[0],V=q[1],Y=Object(c.useState)([]),H=Object(o.a)(Y,2),K=H[0],Q=H[1],X=Object(c.useState)([]),ee=Object(o.a)(X,2),te=ee[0],ae=ee[1],ce=Object(c.useState)([{name:["name"],value:""},{name:["description"],value:""},{name:["address"],value:""},{name:["website"],value:""},{name:["color"],value:"#457b9d"}]),se=Object(o.a)(ce,2),oe=se[0],le=se[1],re=Object(c.useState)("add"),ie=Object(o.a)(re,2),de=ie[0],je=ie[1],ue=Object(c.useState)(null),me=Object(o.a)(ue,2),ve=me[0],ge=me[1],ye=(e.match,Object(s.d)((function(e){return e.userLogin.token}))),we={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(ye)}};Object(c.useEffect)((function(){Ie(1)}),[]);var Ce=function(e){e?(le([{name:["name"],value:e.name},{name:["description"],value:e.description},{name:["address"],value:e.address},{name:["website"],value:e.website},{name:["color"],value:e.color}]),je("edit"),ge(e.id)):(le([{name:["name"],value:""},{name:["description"],value:""},{name:["address"],value:""},{name:["website"],value:""},{name:["color"],value:"#457b9d"}]),je("add")),Q([]),ae([]),z(!0)},Ne={onRemove:function(e){Q([])},beforeUpload:function(e){return Q([e]),!1},fileList:K},Se={onRemove:function(e){ae([])},beforeUpload:function(e){return console.log(e),ae([e]),!1},fileList:te},ke=function(e,t){pe({title:"Are you sure delete this school?",content:Object(S.jsx)("div",{children:e}),okText:Object(S.jsx)("div",{children:"Yes"}),okType:"danger",cancelText:"No",onOk:function(){var a="updatable";d.b.loading("Deleting school...",a,0),G.a.delete("".concat($.d,"/api/school/action/").concat(t,"/"),we).then((function(t){U-1-(T-1)*Z.g<=0&&U>1?Ie(T-1):Ie(T),d.b.success({content:"".concat(e," deleted successfully!"),key:a,duration:2})})).catch((function(e){Object.values(e.response.data).forEach((function(e){return d.b.error({content:e,key:a,duration:2})}))}))}})},Ie=function(e){r(!0),G.a.get("".concat($.d,"/api/school/action/?page=").concat(e),we).then((function(t){B(t.data.results),M(e),L(t.data.count),r(!1)})).catch((function(e){}))},Be=function(e){V(!0);var t=new FormData;t.append("name",e.name),t.append("address",e.address),t.append("description",e.description),t.append("color",e.color),t.append("website",e.website),t.append("image",K[0]?K[0]:""),te[0]&&t.append("logo",te[0]?te[0]:""),G.a.put("".concat($.d,"/api/school/action/").concat(ve,"/"),t,we).then((function(t){Ie(T),z(!1),V(!1),d.b.success({content:"".concat(e.name," updated successfully!"),duration:2})})).catch((function(e){V(!1),Object.values(e.response.data).forEach((function(e){return d.b.error({content:e,duration:2})}))}))};return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(l.b,{className:"border-bottom",children:Object(S.jsx)("div",{className:"container-fluid",children:Object(S.jsxs)(y.a,{justifyContent:"between",alignItems:"center",children:[Object(S.jsxs)("h2",{children:[Object(S.jsx)(ne.a,{})," Schools"]}),Object(S.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(S.jsx)("div",{style:{flex:1,textAlign:"right",marginBottom:10,minWidth:91},children:Object(S.jsxs)(j.a.Group,{defaultValue:fe,onChange:function(e){return function(e){C(e.target.value)}(e)},children:[Object(S.jsx)(j.a.Button,{value:fe,children:Object(S.jsx)(f.a,{})}),Object(S.jsx)(j.a.Button,{value:xe,children:Object(S.jsx)(v.a,{})})]})}),Object(S.jsx)("div",{style:{textAlign:"right",flex:1},children:Object(S.jsxs)(b.a,{type:"primary",className:"ml-2",onClick:function(){return Ce(null)},children:[Object(S.jsx)(g.a,{}),Object(S.jsx)("span",{children:"New School"})]})})]})]})})}),n?Object(S.jsx)(u.a,{active:!0}):Object(S.jsx)(S.Fragment,{children:0===U?Object(S.jsx)("div",{style:{marginTop:20},children:Object(S.jsx)(h.a,{})}):Object(S.jsxs)("div",{className:"my-4 ".concat(w===xe?"container":"container-fluid"),children:[w===xe?I.map((function(e){return Object(S.jsx)(Oe,{data:e,removeId:ke,handleUpdate:Be,showModal:Ce},e.id)})):Object(S.jsx)(m.a,{gutter:46,children:I.map((function(e){return Object(S.jsx)(O.a,{xs:24,sm:12,lg:12,xl:8,xxl:6,children:Object(S.jsx)(he,{data:e,removeId:ke,handleUpdate:Be,showModal:Ce})},e.id)}))}),U>Z.g?Object(S.jsx)(y.a,{justifyContent:"end",children:Object(S.jsx)(p.a,{current:T,onChange:Ie,total:U,pageSize:Z.g})}):null]})}),Object(S.jsx)(be,{visible:P,handleCancel:function(){z(!1)},handleSubmit:function(e){console.log(e),V(!0);var t=new FormData;t.append("name",e.name),t.append("address",e.address),t.append("description",e.description),t.append("color",e.color),t.append("website",e.website),t.append("image",K[0]?K[0]:""),t.append("logo",te[0]?te[0]:""),G.a.post("".concat($.d,"/api/school/action/"),t,we).then((function(t){Ie(T),z(!1),V(!1),d.b.success({content:"".concat(e.name," added successfully!"),duration:2})})).catch((function(e){V(!1),Object.values(e.response.data).forEach((function(e){return d.b.error({content:e,duration:2})}))}))},handleUpdate:Be,props:Ne,logoProps:Se,fields:oe,type:de,submit:J})]})},ge=function(){return Object(S.jsx)(S.Fragment,{children:"hi"})},ye=a(20);function we(e){var t=e.children,a=e.role,c=e.url;return Object(S.jsx)(n.b,{render:function(e){var s=e.location;return a===Z.k?t:Object(S.jsx)(n.a,{to:{pathname:"".concat(c,"/branch"),state:{from:s}}})}})}t.default=function(e){var t=e.match,a=Object(s.d)((function(e){return e.userLogin.user.role_id}));return Object(S.jsx)("div",{children:a===Z.k||a===Z.c?Object(S.jsxs)(n.d,{children:[Object(S.jsx)(n.b,{path:"".concat(t.url,"/branch"),component:ce}),Object(S.jsxs)(we,{path:ye.c,role:a,url:t.url,children:[Object(S.jsx)(n.b,{path:"".concat(t.url,"/school"),component:ve}),Object(S.jsx)(n.b,{path:"".concat(t.url,"/view/:id"),component:ge})]}),Object(S.jsx)(n.a,{from:"".concat(t.url),to:"".concat(t.url,"/branch")})]}):Object(S.jsx)(n.a,{from:"".concat(t.url),to:"".concat(ye.c,"/dashboards")})})}}}]);
//# sourceMappingURL=19.4604d434.chunk.js.map